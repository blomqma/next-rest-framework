import { OPEN_API_VERSION, VERSION } from '../constants';
import { OpenAPIV3_1 } from 'openapi-types';
import { Modify, NextRestFrameworkConfig } from '../types';
import { logNextRestFrameworkError } from './logging';

export const getDefaultConfig = ({
  config
}: {
  config?: NextRestFrameworkConfig;
} = {}): Modify<
  NextRestFrameworkConfig,
  {
    openApiSpecOverrides: OpenAPIV3_1.Document;
  }
> => ({
  localOpenApiSpecPath: 'openapi.json',
  openApiSpecOverrides: {
    openapi: OPEN_API_VERSION,
    info: {
      title: 'Next REST Framework',
      description:
        'This is an autogenerated OpenAPI spec by Next REST Framework.',
      version: VERSION
    },
    components: {}
  },
  openApiJsonPath: '/api/openapi.json',
  openApiYamlPath: '/api/openapi.yaml',
  swaggerUiPath: '/api',
  exposeOpenApiSpec: true,
  errorHandler: logNextRestFrameworkError,
  suppressInfo: false,
  apiRoutesPath: 'pages/api'
});
